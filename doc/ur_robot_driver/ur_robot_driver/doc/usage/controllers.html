

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../../../../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Controllers &mdash; Universal Robots ROS 2 Documentation 0.1 documentation</title>
      <link rel="stylesheet" type="text/css" href="../../../../../_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="../../../../../_static/css/theme.css?v=7ab3649f" />
      <link rel="stylesheet" type="text/css" href="../../../../../_static/copybutton.css?v=76b2166b" />

  
    <link rel="shortcut icon" href="../../../../../_static/logo.png"/>
      <script src="../../../../../_static/jquery.js?v=5d32c60e"></script>
      <script src="../../../../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../../../../../_static/documentation_options.js?v=2709fde1"></script>
      <script src="../../../../../_static/doctools.js?v=9a2dae69"></script>
      <script src="../../../../../_static/sphinx_highlight.js?v=dc90522c"></script>
      <script src="../../../../../_static/clipboard.min.js?v=a7894cd8"></script>
      <script src="../../../../../_static/copybutton.js?v=6dbb43f8"></script>
    <script src="../../../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../../search.html" />
    <link rel="next" title="Simulation" href="simulation.html" />
    <link rel="prev" title="Move the robot" href="move.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../../../../index.html" class="icon icon-home">
            Universal Robots ROS 2 Documentation
              <img src="../../../../../_static/logo.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../../ur_client_library/doc/index.html">ur_client_library</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../ur_description/doc/index.html">ur_description</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">ur_robot_driver</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../overview.html">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../installation/toc.html">Installation</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="toc.html">Usage</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="startup.html">Startup the driver</a></li>
<li class="toctree-l3"><a class="reference internal" href="move.html">Move the robot</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Controllers</a></li>
<li class="toctree-l3"><a class="reference internal" href="simulation.html">Simulation</a></li>
<li class="toctree-l3"><a class="reference internal" href="script_code.html">Sending URScript code to the robot</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../operation_modes.html">Operation modes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../setup_tool_communication.html">Setting up the tool communication on an e-Series robot</a></li>
<li class="toctree-l2"><a class="reference internal" href="../hardware_interface_parameters.html">UR Hardware interface parameters</a></li>
<li class="toctree-l2"><a class="reference internal" href="../dashboard_client.html">Dashboard client</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../ur_calibration/doc/index.html">ur_calibration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../ur_controllers/doc/index.html">ur_controllers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../ur_moveit_config/doc/index.html">ur_moveit_config</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../ur_simulation_gz/ur_simulation_gz/doc/index.html">ur_simulation_gz</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../ur_tutorials/tutorial_index.html">Tutorial examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../migration_notes.html">Migration Notes</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../../index.html">Universal Robots ROS 2 Documentation</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../index.html">ur_robot_driver</a></li>
          <li class="breadcrumb-item"><a href="toc.html">Usage</a></li>
      <li class="breadcrumb-item active">Controllers</li>
      <li class="wy-breadcrumbs-aside">
              <a href="https://github.com/UniversalRobots/Universal_Robots_ROS2_Documentation/blob/main//doc/ur_robot_driver/ur_robot_driver/doc/usage/controllers.rst" class="fa fa-github"> Edit on GitHub</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="controllers">
<h1>Controllers<a class="headerlink" href="#controllers" title="Link to this heading"></a></h1>
<p>This help page describes the different controllers available for the <code class="docutils literal notranslate"><span class="pre">ur_robot_driver</span></code>. This
should help users finding the right controller for their specific use case.</p>
<section id="where-are-controllers-defined">
<h2>Where are controllers defined?<a class="headerlink" href="#where-are-controllers-defined" title="Link to this heading"></a></h2>
<p>Controllers are defined in the <code class="docutils literal notranslate"><span class="pre">config/ur_controllers.yaml</span></code> file.</p>
</section>
<section id="how-do-controllers-get-loaded-and-started">
<h2>How do controllers get loaded and started?<a class="headerlink" href="#how-do-controllers-get-loaded-and-started" title="Link to this heading"></a></h2>
<p>As this driver uses <a class="reference external" href="https://control.ros.org">ros2_control</a> all controllers are managed by the
controller_manager. During startup, a default set of running controllers is loaded and started,
another set is loaded in stopped mode. Stopped controllers won’t be usable right away, but they
need to be started individually.</p>
<p>Controllers that are actually writing to some command interfaces (e.g. joint positions) will claim
those interfaces. Only one controller claiming a certain interface can be active at one point.</p>
<p>Controllers can be switched either through the controller_manager’s service calls, through the
<a class="reference external" href="https://control.ros.org/rolling/doc/ros2_control/controller_manager/doc/userdoc.html#rqt-controller-manager">rqt_controller_manager</a> gui or through the <code class="docutils literal notranslate"><span class="pre">ros2</span> <span class="pre">control</span></code> verb from the package <code class="docutils literal notranslate"><span class="pre">ros-${ROS_DISTRO}-ros2controlcli</span></code> package.</p>
<p>For example, to switch from the default <code class="docutils literal notranslate"><span class="pre">scaled_joint_trajectory_controller</span></code> to the
<code class="docutils literal notranslate"><span class="pre">forward_position_controller</span></code> you can call</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>ros2<span class="w"> </span>control<span class="w"> </span>switch_controllers<span class="w"> </span>--deactivate<span class="w"> </span>scaled_joint_trajectory_controller<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--activate<span class="w"> </span>forward_position_controller
<span class="go">[INFO 2024-09-23 20:32:04.373] [_ros2cli_1207798]: waiting for service /controller_manager/switch_controller to become available...</span>
<span class="go">Successfully switched controllers</span>
</pre></div>
</div>
</section>
<section id="read-only-broadcasters">
<h2>Read-only broadcasters<a class="headerlink" href="#read-only-broadcasters" title="Link to this heading"></a></h2>
<p>These broadcasters are read-only. They read states from the robot and publish them on a ROS topic.
As they are read-only, they don’t claim any resources and can be combined freely. By default, they
are all started and running. Those controllers do not require the robot to have the
external_control script running.</p>
<section id="joint-state-broadcaster">
<h3>joint_state_broadcaster<a class="headerlink" href="#joint-state-broadcaster" title="Link to this heading"></a></h3>
<p>Type: <a class="reference external" href="https://control.ros.org/rolling/doc/ros2_controllers/joint_state_broadcaster/doc/userdoc.html">joint_state_broadcaster/JointStateBroadcaster</a></p>
<p>Publishes all joints’ positions, velocities, and motor currents as <code class="docutils literal notranslate"><span class="pre">sensor_msgs/JointState</span></code> on the <code class="docutils literal notranslate"><span class="pre">joint_states</span></code> topic.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The effort field contains the currents reported by the joints and not the actual efforts in a
physical sense.</p>
</div>
</section>
<section id="speed-scaling-state-broadcaster">
<h3>speed_scaling_state_broadcaster<a class="headerlink" href="#speed-scaling-state-broadcaster" title="Link to this heading"></a></h3>
<p>Type: <a class="reference internal" href="../../../ur_controllers/doc/index.html#speed-scaling-state-broadcaster"><span class="std std-ref">ur_controllers/SpeedScalingStateBroadcaster</span></a></p>
<p>This broadcaster publishes the current actual execution speed as reported by the robot. Values are
floating points between 0 and 1.</p>
</section>
<section id="force-torque-sensor-broadcaster">
<h3>force_torque_sensor_broadcaster<a class="headerlink" href="#force-torque-sensor-broadcaster" title="Link to this heading"></a></h3>
<p>Type: <a class="reference external" href="https://control.ros.org/rolling/doc/ros2_controllers/force_torque_sensor_broadcaster/doc/userdoc.html">force_torque_sensor_broadcaster/ForceTorqueSensorBroadcaster</a></p>
<p>Publishes the robot’s wrench as reported from the controller.</p>
</section>
</section>
<section id="commanding-controllers">
<h2>Commanding controllers<a class="headerlink" href="#commanding-controllers" title="Link to this heading"></a></h2>
<p>The commanding controllers control the robot’s motions. Those controllers can’t be combined
arbitrarily, as they will claim hardware resources. Only one controller can claim one hardware
resource at a time.</p>
<section id="scaled-joint-trajectory-controller-default-motion-controller">
<h3>scaled_joint_trajectory_controller (Default motion controller)<a class="headerlink" href="#scaled-joint-trajectory-controller-default-motion-controller" title="Link to this heading"></a></h3>
<p>Type: <a class="reference internal" href="../../../ur_controllers/doc/index.html#scaled-jtc"><span class="std std-ref">ur_controllers/ScaledJointTrajectoryController</span></a></p>
<p>Scaled version of the
<a class="reference external" href="https://control.ros.org/master/doc/ros2_controllers/joint_trajectory_controller/doc/userdoc.html">joint_trajectory_controller</a>.
It uses the robot’s speed scaling information and thereby the safety compliance features, like pause on safeguard stop. In addition, it also makes it possible to adjust execution speed using the speed slider on the teach pendant or set the program in pause and restart it again.
See it’s linked documentation for details.</p>
</section>
<section id="io-and-status-controller">
<h3>io_and_status_controller<a class="headerlink" href="#io-and-status-controller" title="Link to this heading"></a></h3>
<p>Type: <a class="reference internal" href="../../../ur_controllers/doc/index.html#io-and-status-controller"><span class="std std-ref">ur_controllers/GPIOController</span></a></p>
<p>Allows setting I/O ports, controlling some UR-specific functionality and publishes status information about the robot.</p>
</section>
<section id="forward-velocity-controller">
<h3>forward_velocity_controller<a class="headerlink" href="#forward-velocity-controller" title="Link to this heading"></a></h3>
<p>Type: <a class="reference external" href="https://control.ros.org/rolling/doc/ros2_controllers/position_controllers/doc/userdoc.html#position-controllers-jointgrouppositioncontroller">velocity_controllers/JointGroupVelocityController</a></p>
<p>Allows setting target joint positions directly. The robot tries to reach the target position as
fast as possible. The user is therefore responsible for sending commands that are achievable. This
controller is particularly useful when doing servoing such as <code class="docutils literal notranslate"><span class="pre">moveit_servo</span></code>.</p>
</section>
<section id="forward-position-controller">
<h3>forward_position_controller<a class="headerlink" href="#forward-position-controller" title="Link to this heading"></a></h3>
<p>Type: <a class="reference external" href="https://control.ros.org/rolling/doc/ros2_controllers/velocity_controllers/doc/userdoc.html#velocity-controllers-jointgroupvelocitycontroller">position_controllers/JointGroupPositionController</a></p>
<p>Allows setting target joint velocities directly. The user is responsible for sending commands that
are achievable. This controller is particularly useful when doing servoing such as
<code class="docutils literal notranslate"><span class="pre">moveit_servo</span></code>.</p>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="move.html" class="btn btn-neutral float-left" title="Move the robot" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="simulation.html" class="btn btn-neutral float-right" title="Simulation" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2024, Universal Robots A/S.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>